{"version":3,"sources":["component/SideBar.js","logo.svg","component/Message.js","component/ChatRoom.js","component/SignIn.js","App.js","reportWebVitals.js","index.js"],"names":["Sidebar","props","history","useHistory","useState","channels","setChannel","useEffect","axios","get","then","res","data","className","FiberManualRecord","user","Add","onClick","name","prompt","post","channelName","map","ele","push","pathname","id","state","Message","src","logo","alt","Date","toUTCString","message","image","stompClient","ChatRoom","useParams","location","input","setInput","messages","setMessages","hiddenFileInput","React","useRef","messagesEndRef","scrollToBottom","current","addEventListener","event","target","currentTarget","scroll","top","scrollHeight","behavior","connect","Stomp","require","SockJS","over","onConnected","console","log","subscribe","onMessageReceived","msg","ref","placeholder","value","onChange","e","type","preventDefault","send","JSON","stringify","style","display","click","color","file","files","formData","FormData","append","headers","accept","SignIn","setName","Button","marginTop","variant","setUser","disabled","App","exact","path","render","to","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"6NAqDeA,MAhDf,SAAiBC,GAEb,IAAMC,EAAUC,cAFI,EAIWC,mBAAS,IAJpB,mBAIbC,EAJa,KAIHC,EAJG,KA4BpB,OARAC,qBAAU,WACNC,IAAMC,IAAI,kCACTC,MAAK,SAAAC,GACFL,EAAWK,EAAIC,WAErB,IAIE,sBAAKC,UAAU,UAAf,UACI,sBAAKA,UAAU,iBAAf,UACI,8CACA,+BAAI,cAACC,EAAA,EAAD,IACHb,EAAMc,WAGX,sBAAKF,UAAU,UAAf,sBACa,cAACG,EAAA,EAAD,CAAKC,QA/BP,WACf,IAAMC,EAAOC,OAAO,8BACpBX,IAAMY,KAAK,oCAAoC,CAACC,YAAYH,IAC3DR,MAAK,SAACC,GACHL,EAAW,GAAD,mBAAKD,GAAL,CAAcM,EAAIC,iBA6B3BP,EAASiB,KAAI,SAAAC,GACV,OAAO,sBAAKV,UAAU,eAAeI,QAAS,kBA1BnCL,EA0BqDW,OAxBxErB,EAAQsB,KAAK,CAACC,SAAS,SAAD,OAAWb,EAAKc,IACtCC,MAAO,CAACT,KAAKN,EAAKS,eAHA,IAACT,GA0BJ,eAA+EW,EAAIF,cAAfE,EAAIG,W,QC7ChF,MAA0B,iCCkB1BE,MAff,SAAiB3B,GAAQ,IACdW,EAAQX,EAARW,KACP,OACI,8BACA,sBAAKC,UAAU,UAAf,UACI,qBAAKgB,IAAKC,EAAMC,IAAI,KACpB,gCACA,+BAAKnB,EAAKM,KAAV,IAAgB,sBAAML,UAAU,eAAhB,UAAgC,IAAImB,MAAOC,mBAC1DrB,EAAKsB,QAAU,4BAAItB,EAAKsB,UAAe,qBAAKL,IAAK,yBAAyBjB,EAAKuB,iB,iBCLxFC,EAAc,KA2GHC,MA1Gf,SAAkBpC,GAAQ,IACdyB,EAAOY,cAAPZ,GACAa,EAAapC,cAAboC,SAFa,EAKKnC,qBALL,mBAKdoC,EALc,KAKPC,EALO,OAMWrC,mBAAS,MANpB,mBAMdsC,EANc,KAMJC,EANI,KAOfC,EAAkBC,IAAMC,OAAO,MAC/BC,EAAiBD,iBAAO,MAwBxBE,EAAiB,WAAO,IAAD,EACzB,UAAAD,EAAeE,eAAf,SAAwBC,iBAAiB,mBAAmB,SAAAC,GAAU,IAC3CC,EAAWD,EAA1BE,cACRD,EAAOE,OAAO,CAAEC,IAAKH,EAAOI,aAAcC,SAAU,eAS5DlD,qBAAU,WACNmD,IACAlD,IAAMC,IAAI,kCAAoCiB,GACzChB,MAAK,SAAAC,GACFgC,EAAYhC,EAAIC,MAAM,kBAAMoC,YAErC,CAACtB,IAGJ,IAAMgC,EAAU,WACZ,IAAMC,EAAQC,EAAQ,KAClBC,EAASD,EAAQ,KACrBC,EAAS,IAAIA,EAAO,6BACpBzB,EAAcuB,EAAMG,KAAKD,IACbH,QAAQ,GAAIK,GAAa,SAACpD,GAAD,OAAOqD,QAAQC,IAAI,aAGpDF,EAAc,WAClB3B,EAAY8B,UAAU,cACpBC,IAIEA,EAAoB,SAACC,GACzB5D,IAAMC,IAAI,kCAAoCiB,GAC7ChB,MAAK,SAAAC,GACFgC,EAAYhC,EAAIC,MAAM,kBAAMoC,OAC5BP,EAAS,IACTO,QAIR,OACIN,GAAY,sBAAK7B,UAAU,OAAOwD,IAAKtB,EAA3B,UACR,qBAAKlC,UAAU,cAAf,SACI,oCAAO0B,EAASZ,MAAMT,UAGzBwB,EAASpB,KAAI,SAACV,GACX,OAAO,cAAC,EAAD,CAASA,KAAMA,GAAWA,EAAKc,OAE1C,sBAAKb,UAAU,aAAf,UACI,iCACI,uBAAOyD,YAAW,oBAAe/B,EAASZ,MAAMT,MAAQqD,MAAO/B,EAAOgC,SAAU,SAAAC,GAAC,OAAIhC,EAASgC,EAAErB,OAAOmB,UACvG,wBAAQG,KAAK,SAASzD,QAjDlB,SAACwD,GACjBA,EAAEE,iBACFvC,EAAYwC,KAAK,aAAalD,EAAI,GAAImD,KAAKC,UAAU,CAAE5C,QAASM,EAAOtB,KAAMjB,EAAMc,SA+C3BgE,MAAO,CAAEC,QAAS,aAGlE,wBAAQ/D,QAjFA,SAAAkC,GAChBP,EAAgBK,QAAQgC,SAgFhB,SACI,cAAC,IAAD,CAAWC,MAAM,cAErB,uBACIR,KAAK,OACLL,IAAKzB,EACL4B,SAnFS,SAAArB,GACrB,IAAMgC,EAAOhC,EAAMC,OAAOgC,MAAM,GAC1BC,EAAW,IAAIC,SACrBD,EAASE,OAAO,OAAQJ,GACxBE,EAASE,OAAO,OAAQtF,EAAMc,MAM9BP,IAAMY,KAAK,mCAAqCM,EAAI2D,EALrC,CACXG,QAAS,CACL,eAAgB,yBAInB9E,MAAK,SAACC,GACHgC,EAAYhC,EAAIC,MAChB6B,EAAS,IACTO,QAsEI+B,MAAO,CAAEC,QAAS,QAClBS,OAAO,4C,SCzFZC,MAdf,SAAgBzF,GAAQ,IAAD,EACKG,mBAAS,IADd,mBACZc,EADY,KACNyE,EADM,KAGnB,OACI,sBAAK9E,UAAU,UAAf,UACI,yDACA,uBAAO6D,KAAK,SAASJ,YAAY,kBAAkBE,SAAU,SAAAC,GAAC,OAAEkB,EAAQlB,EAAErB,OAAOmB,UACjF,8BACI,cAACqB,EAAA,EAAD,CAAQb,MAAO,CAACc,UAAU,QAASC,QAAQ,YAAYZ,MAAM,UAAUjE,QAAS,kBAAIhB,EAAM8F,QAAQ7E,IAAO8E,SAAiB,KAAP9E,EAAnH,0BCyBD+E,MA5Bf,WAAgB,IAAD,EAEW7F,mBAAS,MAFpB,mBAENW,EAFM,KAEAgF,EAFA,KAIb,OACE,8BACY,OAAThF,EAAgB,cAAC,EAAD,CAAQgF,QAAS,SAAA7E,GAAI,OAAI6E,EAAQ7E,MAChD,eAAC,IAAD,WAEE,wBAAQL,UAAU,SAAlB,0BAIA,sBAAKA,UAAU,WAAf,UACE,cAAC,EAAD,CAASE,KAAMA,IACf,cAAC,IAAD,CAAOmF,OAAK,EAACC,KAAK,GAAGC,OAAQ,kBAAM,cAAC,IAAD,CAAUC,GAAG,gBAChD,cAAC,IAAD,CAAOF,KAAK,YAAZ,SACE,cAAC,EAAD,CAAUpF,KAAMA,MAElB,cAAC,IAAD,CAAOoF,KAAK,WAAZ,SACE,qBAAKtF,UAAU,eAAf,SAA8B,0CAAaE,kBChB1CuF,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqB9F,MAAK,YAAkD,IAA/C+F,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCDdO,IAASV,OACP,cAAC,IAAMW,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,SAM1BX,K","file":"static/js/main.7e4d30e6.chunk.js","sourcesContent":["import { Add, FiberManualRecord } from '@material-ui/icons';\nimport axios from 'axios';\nimport React, { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nfunction Sidebar(props) {\n\n    const history = useHistory();\n\n    const [channels, setChannel] = useState([]);\n\n    const addChannel = () => {\n        const name = prompt(\"Please enter Channel name.\");\n        axios.post(\"http://localhost:8080/add-channel\",{channelName:name})\n        .then((res)=>{\n            setChannel([...channels,res.data]);\n        });\n    }\n\n    const selectChannel = (data) => {\n       \n        history.push({pathname: `/room/${data.id}`,\n        state: {name:data.channelName}});\n    }\n\n    useEffect(()=>{\n        axios.get(\"http://localhost:8080/channels\")\n        .then(res=>{\n            setChannel(res.data);\n        })\n    },[])\n\n\n    return (\n        <div className=\"sidebar\">\n            <div className=\"sidebar-header\">\n                <h2>Hacker Slack</h2>\n                <h3><FiberManualRecord/>\n                {props.user}</h3>\n            </div>\n\n            <div className=\"channel\">\n                Channels <Add onClick={addChannel}/>\n            </div>\n            {channels.map(ele=>{\n                return <div className=\"channel-name\" onClick={()=>selectChannel(ele)} key={ele.id}># {ele.channelName}</div>\n            })}\n            \n            \n        </div>\n    );\n}\n\nexport default Sidebar;","export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","import React from 'react';\nimport logo from '../logo.svg';\n\nfunction Message(props) {\n    const {data} = props;\n    return (\n        <div>\n        <div className=\"message\">\n            <img src={logo} alt=\"\"/>\n            <div>\n            <h4>{data.name} <span className=\"message-time\">{new Date().toUTCString()}</span></h4>\n            {data.message ? <p>{data.message}</p> : <img src={\"data:image/jpg;base64,\"+data.image}/>}\n            </div>\n            </div>\n        </div>\n    );\n}\n\nexport default Message;","import axios from 'axios';\nimport React, { useEffect, useRef, useState } from 'react';\nimport { useHistory, useParams } from 'react-router-dom';\nimport Message from './Message';\nimport ImageIcon from '@material-ui/icons/Image';\n\nvar stompClient = null;\nfunction ChatRoom(props) {\n    const { id } = useParams();\n    const { location } = useHistory();\n   \n\n    const [input, setInput] = useState();\n    const [messages, setMessages] = useState(null);\n    const hiddenFileInput = React.useRef(null);\n    const messagesEndRef = useRef(null)\n\n    const handleClick = event => {\n        hiddenFileInput.current.click();\n    };\n\n    const handleImageUpoad = event => {\n        const file = event.target.files[0];\n        const formData = new FormData();\n        formData.append('file', file);\n        formData.append('user', props.user);\n        const config = {\n            headers: {\n                'content-type': 'multipart/form-data'\n            }\n        }\n        axios.post(\"http://localhost:8080/add-image/\" + id, formData, config)\n            .then((res) => {\n                setMessages(res.data);\n                setInput('');\n                scrollToBottom();\n            });\n    };\n\n    const scrollToBottom = () => {\n        messagesEndRef.current?.addEventListener('DOMNodeInserted', event => {\n            const { currentTarget: target } = event;\n            target.scroll({ top: target.scrollHeight, behavior: 'smooth' });\n        });\n    }\n\n    const sendMessage = (e) => {\n        e.preventDefault();\n        stompClient.send(\"/app/chat/\"+id, {}, JSON.stringify({ message: input, name: props.user }));\n    }\n\n    useEffect(() => {\n        connect();\n        axios.get(\"http://localhost:8080/messages/\" + id)\n            .then(res => {\n                setMessages(res.data, () => scrollToBottom());\n            });\n    }, [id]);\n\n\n    const connect = () => {\n        const Stomp = require(\"stompjs\");\n        var SockJS = require(\"sockjs-client\");\n        SockJS = new SockJS(\"http://localhost:8080/ws\");\n        stompClient = Stomp.over(SockJS);\n        stompClient.connect({}, onConnected, (res)=>console.log(\"error\"));\n      };\n    \n      const onConnected = () => {\n        stompClient.subscribe(\"/topic/mesg\",\n          onMessageReceived\n        );\n      };\n\n      const onMessageReceived = (msg) => {\n        axios.get(\"http://localhost:8080/messages/\" + id)\n        .then(res => {\n            setMessages(res.data, () => scrollToBottom());\n            setInput('');\n            scrollToBottom();\n        });\n      }\n\n    return (\n        messages && <div className=\"chat\" ref={messagesEndRef} >\n            <div className=\"chat-header\">\n                <h3># {location.state.name}</h3>\n            </div>\n\n            {messages.map((data) => {\n                return <Message data={data} key={data.id} />\n            })}\n            <div className=\"chat-input\">\n                <form>\n                    <input placeholder={`Message # ${location.state.name}`} value={input} onChange={e => setInput(e.target.value)} />\n                    <button type=\"submit\" onClick={sendMessage} style={{ display: 'none' }} ></button>\n\n                </form>\n                <button onClick={handleClick}>\n                    <ImageIcon color=\"primary\" />\n                </button>\n                <input\n                    type=\"file\"\n                    ref={hiddenFileInput}\n                    onChange={handleImageUpoad}\n                    style={{ display: 'none' }}\n                    accept=\"image/x-png,image/gif,image/jpeg\"\n                />\n            </div>\n        </div>\n    );\n}\n\nexport default ChatRoom;","import { Button } from '@material-ui/core';\nimport React, { useState } from 'react';\n\nfunction SignIn(props) {\n    const [name, setName] = useState(\"\");\n\n    return (\n        <div className=\"welcome\">\n            <h1>Welcome to Hacker Slack</h1>\n            <input type=\"sumbit\" placeholder=\"Enter your name\" onChange={e=>setName(e.target.value)}/>\n            <div>\n                <Button style={{marginTop:'10px'}} variant=\"contained\" color=\"primary\" onClick={()=>props.setUser(name)} disabled={name===\"\"}>SignIn</Button>\n            </div>\n        </div>\n    );\n}\n\nexport default SignIn;","import './App.css';\nimport Sidebar from './component/SideBar';\nimport { Route, BrowserRouter, Redirect } from 'react-router-dom';\nimport ChatRoom from './component/ChatRoom';\nimport SignIn from './component/SignIn';\nimport { useState } from 'react';\n\n\nfunction App() {\n\n  const [user, setUser] = useState(null);\n\n  return (\n    <div>\n      {user === null ? <SignIn setUser={name => setUser(name)} /> :\n        <BrowserRouter>\n\n          <header className=\"header\">\n            Hacker Slack\n          </header>\n\n          <div className=\"app-body\">\n            <Sidebar user={user} />\n            <Route exact path='' render={() => <Redirect to='/welcome' />} />\n            <Route path=\"/room/:id\">\n              <ChatRoom user={user} />\n            </Route>\n            <Route path=\"/welcome\">\n              <div className=\"chat welcome\"><h1>Welcome {user}</h1></div>\n            </Route>\n          </div>\n        </BrowserRouter>}\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}