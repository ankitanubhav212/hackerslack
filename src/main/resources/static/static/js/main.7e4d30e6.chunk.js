(this.webpackJsonpslack=this.webpackJsonpslack||[]).push([[0],{159:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),s=n(28),r=n.n(s),i=(n(89),n(22)),l=(n(90),n(81)),o=n(175),j=n(176),u=n(25),d=n.n(u),h=n(6),b=n(2);var m=function(e){var t=Object(h.f)(),n=Object(c.useState)([]),a=Object(i.a)(n,2),s=a[0],r=a[1];return Object(c.useEffect)((function(){d.a.get("http://localhost:8080/channels").then((function(e){r(e.data)}))}),[]),Object(b.jsxs)("div",{className:"sidebar",children:[Object(b.jsxs)("div",{className:"sidebar-header",children:[Object(b.jsx)("h2",{children:"Hacker Slack"}),Object(b.jsxs)("h3",{children:[Object(b.jsx)(o.a,{}),e.user]})]}),Object(b.jsxs)("div",{className:"channel",children:["Channels ",Object(b.jsx)(j.a,{onClick:function(){var e=prompt("Please enter Channel name.");d.a.post("http://localhost:8080/add-channel",{channelName:e}).then((function(e){r([].concat(Object(l.a)(s),[e.data]))}))}})]}),s.map((function(e){return Object(b.jsxs)("div",{className:"channel-name",onClick:function(){return n=e,void t.push({pathname:"/room/".concat(n.id),state:{name:n.channelName}});var n},children:["# ",e.channelName]},e.id)}))]})},O=n(41),p=n.p+"static/media/logo.6ce24c58.svg";var f=function(e){var t=e.data;return Object(b.jsx)("div",{children:Object(b.jsxs)("div",{className:"message",children:[Object(b.jsx)("img",{src:p,alt:""}),Object(b.jsxs)("div",{children:[Object(b.jsxs)("h4",{children:[t.name," ",Object(b.jsx)("span",{className:"message-time",children:(new Date).toUTCString()})]}),t.message?Object(b.jsx)("p",{children:t.message}):Object(b.jsx)("img",{src:"data:image/jpg;base64,"+t.image})]})]})})},x=n(80),g=n.n(x),v=null;var N=function(e){var t=Object(h.g)().id,s=Object(h.f)().location,r=Object(c.useState)(),l=Object(i.a)(r,2),o=l[0],j=l[1],u=Object(c.useState)(null),m=Object(i.a)(u,2),O=m[0],p=m[1],x=a.a.useRef(null),N=Object(c.useRef)(null),k=function(){var e;null===(e=N.current)||void 0===e||e.addEventListener("DOMNodeInserted",(function(e){var t=e.currentTarget;t.scroll({top:t.scrollHeight,behavior:"smooth"})}))};Object(c.useEffect)((function(){y(),d.a.get("http://localhost:8080/messages/"+t).then((function(e){p(e.data,(function(){return k()}))}))}),[t]);var y=function(){var e=n(117),t=n(124);t=new t("http://localhost:8080/ws"),(v=e.over(t)).connect({},C,(function(e){return console.log("error")}))},C=function(){v.subscribe("/topic/mesg",S)},S=function(e){d.a.get("http://localhost:8080/messages/"+t).then((function(e){p(e.data,(function(){return k()})),j(""),k()}))};return O&&Object(b.jsxs)("div",{className:"chat",ref:N,children:[Object(b.jsx)("div",{className:"chat-header",children:Object(b.jsxs)("h3",{children:["# ",s.state.name]})}),O.map((function(e){return Object(b.jsx)(f,{data:e},e.id)})),Object(b.jsxs)("div",{className:"chat-input",children:[Object(b.jsxs)("form",{children:[Object(b.jsx)("input",{placeholder:"Message # ".concat(s.state.name),value:o,onChange:function(e){return j(e.target.value)}}),Object(b.jsx)("button",{type:"submit",onClick:function(n){n.preventDefault(),v.send("/app/chat/"+t,{},JSON.stringify({message:o,name:e.user}))},style:{display:"none"}})]}),Object(b.jsx)("button",{onClick:function(e){x.current.click()},children:Object(b.jsx)(g.a,{color:"primary"})}),Object(b.jsx)("input",{type:"file",ref:x,onChange:function(n){var c=n.target.files[0],a=new FormData;a.append("file",c),a.append("user",e.user);d.a.post("http://localhost:8080/add-image/"+t,a,{headers:{"content-type":"multipart/form-data"}}).then((function(e){p(e.data),j(""),k()}))},style:{display:"none"},accept:"image/x-png,image/gif,image/jpeg"})]})]})},k=n(177);var y=function(e){var t=Object(c.useState)(""),n=Object(i.a)(t,2),a=n[0],s=n[1];return Object(b.jsxs)("div",{className:"welcome",children:[Object(b.jsx)("h1",{children:"Welcome to Hacker Slack"}),Object(b.jsx)("input",{type:"sumbit",placeholder:"Enter your name",onChange:function(e){return s(e.target.value)}}),Object(b.jsx)("div",{children:Object(b.jsx)(k.a,{style:{marginTop:"10px"},variant:"contained",color:"primary",onClick:function(){return e.setUser(a)},disabled:""===a,children:"SignIn"})})]})};var C=function(){var e=Object(c.useState)(null),t=Object(i.a)(e,2),n=t[0],a=t[1];return Object(b.jsx)("div",{children:null===n?Object(b.jsx)(y,{setUser:function(e){return a(e)}}):Object(b.jsxs)(O.a,{children:[Object(b.jsx)("header",{className:"header",children:"Hacker Slack"}),Object(b.jsxs)("div",{className:"app-body",children:[Object(b.jsx)(m,{user:n}),Object(b.jsx)(h.b,{exact:!0,path:"",render:function(){return Object(b.jsx)(h.a,{to:"/welcome"})}}),Object(b.jsx)(h.b,{path:"/room/:id",children:Object(b.jsx)(N,{user:n})}),Object(b.jsx)(h.b,{path:"/welcome",children:Object(b.jsx)("div",{className:"chat welcome",children:Object(b.jsxs)("h1",{children:["Welcome ",n]})})})]})]})})},S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,178)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),s(e),r(e)}))};r.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(C,{})}),document.getElementById("root")),S()},89:function(e,t,n){},90:function(e,t,n){}},[[159,1,2]]]);
//# sourceMappingURL=main.7e4d30e6.chunk.js.map